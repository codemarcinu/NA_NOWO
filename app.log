2025-05-09 19:25:57,124 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:26:07,332 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:26:08,157 INFO: OCR OK dla pliku receipt.pdf. Tekst: Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:26:12,001 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:26:14,405 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:26:15,207 INFO: OCR OK dla pliku receipt.pdf. Tekst: Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:26:24,963 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:26:24,965 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:26:39,757 INFO: Błąd LLM: Błąd parsowania odpowiedzi Gemini: Expecting value: line 1 column 1 (char 0)
2025-05-09 19:30:09,114 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:30:12,210 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:30:13,034 INFO: OCR OK dla pliku receipt.pdf. Tekst: Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:30:17,494 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:30:25,449 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:30:25,452 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:30:40,738 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1,5l\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": f
2025-05-09 19:30:40,738 INFO: [LLM] Błąd parsowania odpowiedzi Gemini: Expecting value: line 1 column 1 (char 0) | Odpowiedź: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1,5l\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Jogurt Nat 190 200g\",\n    \"nazwa_znormalizowana\": \"Jogurt naturalny 200g\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.05,\n    \"cena_laczna\": 1.05,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Jogurt Nat 190 200g\",\n    \"nazwa_znormalizowana\": \"Jogurt naturalny 200g\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.05,\n    \"cena_laczna\": 1.05,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PaprykaOstraKamis16\",\n    \"nazwa_znormalizowana\": \"Papryka ostra Kamis\",\n    \"kategoria\": \"Przyprawy\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.99,\n    \"cena_laczna\": 1.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"B\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"SoczewicaPloNa500g\",\n    \"nazwa_znormalizowana\": \"Soczewica 500g\",\n    \"kategoria\": \"Produkty suche\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 5.86,\n    \"cena_laczna\": 5.86,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"WafelEstellaDes50g\",\n    \"nazwa_znormalizowana\": \"Wafel Estella 50g\",\n    \"kategoria\": \"Słodycze\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.19,\n    \"cena_laczna\": 1.19,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n    {\n    \"produkt\": \"SerTwarPółtłu250g\",\n    \"nazwa_znormalizowana\": \"Ser twarogowy półtłusty 250g\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 4.05,\n    \"cena_laczna\": null,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 70\n  },\n  {\n    \"produkt\": \"MarchewLuz\",\n    \"nazwa_znormalizowana\": \"Marchew luz\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 0.365,\n    \"jednostka\": \"kg\",\n    \"cena_jednostkowa\": 3.69,\n    \"cena_laczna\": 1.35,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"G\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"rabat\",\n    \"nazwa_znormalizowana\": \"rabat\",\n    \"kategoria\": \"rabat\",\n    \"ilosc\": 1,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": -0.62,\n    \"cena_laczna\": -0.62,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.62,\n    \"kategoria_podatkowa\": null,\n    \"status\": \"dostępny\",\n    \"pewnosc\": 100\n  },\n    {\n    \"produkt\": \"rapryka \u003eiodka\",\n    \"nazwa_znormalizowana\": \"Papryka słodka\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 0.220,\n    \"jednostka\": \"kg\",\n    \"cena_jednostkowa\": 13.99,\n    \"cena_laczna\": 3.08,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 90\n  },\n  {\n    \"produkt\": \"Cebula Żółta Luz\",\n    \"nazwa_znormalizowana\": \"Cebula żółta luz\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 0.455,\n    \"jednostka\": \"kg\",\n    \"cena_jednostkowa\": 3.49,\n    \"cena_laczna\": 1.59,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  }\n]\n```"
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "avgLogprobs": -0.010217893760622912
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 993,
    "candidatesTokenCount": 2620,
    "totalTokenCount": 3613,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 993
      }
    ],
    "candidatesTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 2620
      }
    ]
  },
  "modelVersion": "gemini-2.0-flash-lite"
}

2025-05-09 19:30:40,739 INFO: Błąd LLM: Błąd parsowania odpowiedzi Gemini: Expecting value: line 1 column 1 (char 0)
2025-05-09 19:36:29,605 INFO: Plik wgrany: 20241209_151934.pdf
2025-05-09 19:36:31,868 INFO: Plik wgrany: 20241209_151934.pdf
2025-05-09 19:36:32,997 INFO: OCR OK dla pliku 20241209_151934.pdf. Tekst: Podsumowanie zakupów

Kaufland Legionowo
ul. Zegrzyńska 115

Legionowo

JamarPassataBI0700G
Czosnek szt

Czosnek szt

Imbir kg

Papryka czerwona kg
K.MakaronSpaghetti
Cytryny kg
OlejWielkopolski1!
Cuk...
2025-05-09 19:36:37,832 INFO: Plik wgrany: 20241209_151934.pdf
2025-05-09 19:36:44,727 INFO: Plik wgrany: 20241209_151934.pdf
2025-05-09 19:36:44,730 INFO: Prompt do LLM (sklep: Kaufland): Podsumowanie zakupów

Kaufland Legionowo
ul. Zegrzyńska 115

Legionowo

JamarPassataBI0700G
Czosnek szt

Czosnek szt

Imbir kg

Papryka czerwona kg
K.MakaronSpaghetti
Cytryny kg
OlejWielkopolski1!
Cuk...
2025-05-09 19:37:05,469 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"JamarPassataBI0700G\",\n    \"nazwa_znormalizowana\": \"Passata Jamar BIO 700g\",\n    \"kategoria\": \"Warzywa i przetwory\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 7.29,\n    \"cena_laczna\": 7.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"09.12.2024\",\n    \"sklep\": \"Kaufland\",\n    \"zamrozony\": false,\n    \"rabat\": 0,\n    \"kategoria_podatkowa\": \"5%\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Czosnek szt\",\n    \"nazwa_znormalizowana\": \"Czosnek\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.37,\n    \"cena_laczna\": 1.37,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"09.12.2024\",\n    \"sklep\": \"Kaufland\",\n    \"zamrozony\": false,\n    \"rabat\": 0,\n    \"kate
2025-05-09 19:37:05,469 INFO: Odpowiedź LLM: [{'produkt': 'JamarPassataBI0700G', 'nazwa_znormalizowana': 'Passata Jamar BIO 700g', 'kategoria': 'Warzywa i przetwory', 'ilosc': 1, 'jednostka': 'szt.', 'cena_jednostkowa': 7.29, 'cena_laczna': 7.29, 'data_waznosci': None, 'data_zakupu': '09.12.2024', 'sklep': 'Kaufland', 'zamrozony': False, 'rabat': 0, 'kategoria_podatkowa': '5%', 'status': 'dostępny', 'pewnosc': 95}, {'produkt': 'Czosnek szt', 'nazwa_znormalizowana': 'Czosnek', 'kategoria': 'Warzywa i owoce', 'ilosc': 1, 'jednostka': 'szt.',
2025-05-09 19:43:23,788 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:43:25,811 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:43:26,612 INFO: OCR OK dla pliku receipt.pdf. Tekst: Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:43:31,621 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:43:36,667 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:43:36,670 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:43:50,907 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"I\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa\",\n    \"ilosc\": 1.0,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n   
2025-05-09 19:43:50,907 INFO: Odpowiedź LLM: [{'produkt': 'Mleko UHT 1,5 1I', 'nazwa_znormalizowana': 'Mleko UHT 1.5l', 'kategoria': 'Mleko', 'ilosc': 1.0, 'jednostka': 'l', 'cena_jednostkowa': 3.29, 'cena_laczna': 3.29, 'data_waznosci': None, 'data_zakupu': '13.01.2025', 'sklep': 'Biedronka', 'zamrozony': False, 'rabat': 0.0, 'kategoria_podatkowa': 'I', 'status': 'dostępny', 'pewnosc': 95}, {'produkt': 'PomkKroNaszSpiż240g', 'nazwa_znormalizowana': 'Pomidory krojone w sosie własnym 240g', 'kategoria': 'Warzywa', 'ilosc': 1.0, 'jednostka':
2025-05-09 19:44:20,221 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:44:24,282 INFO: Plik wgrany: receipt.pdf
2025-05-09 19:44:24,285 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327

13.01.2025 13:57

NIEFISKALNY
Nazwa PTU Ilość Cena Wartość
Mleko UHT 1,5 1I c 1.000 x 3,29 3,29
Pom...
2025-05-09 19:44:38,896 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko i nabiał\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"I\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"r
2025-05-09 19:44:38,897 INFO: Odpowiedź LLM: [{'produkt': 'Mleko UHT 1,5 1I', 'nazwa_znormalizowana': 'Mleko UHT 1.5l', 'kategoria': 'Mleko i nabiał', 'ilosc': 1.0, 'jednostka': 'l', 'cena_jednostkowa': 3.29, 'cena_laczna': 3.29, 'data_waznosci': None, 'data_zakupu': '13.01.2025', 'sklep': 'Biedronka', 'zamrozony': False, 'rabat': 0.0, 'kategoria_podatkowa': 'I', 'status': 'dostępny', 'pewnosc': 95}, {'produkt': 'PomkKroNaszSpiż240g', 'nazwa_znormalizowana': 'Pomidory krojone w sosie własnym 240g', 'kategoria': 'Warzywa i owoce', 'ilosc': 
2025-05-09 19:45:07,403 INFO: Plik wgrany: receipt.pdf
2025-05-09 20:02:29,485 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"JamarPassataBI0700G\",\n    \"nazwa_znormalizowana\": \"Passata Jamar Bio 700g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 7.29,\n    \"cena_laczna\": 7.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"09.12.2024\",\n    \"sklep\": \"Kaufland\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"5%\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Czosnek szt\",\n    \"nazwa_znormalizowana\": \"Czosnek\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.37,\n    \"cena_laczna\": 1.37,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"09.12.2024\",\n    \"sklep\": \"Kaufland\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kate
2025-05-09 20:12:09,264 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1,5l\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"c\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce przetworzone\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"z
2025-05-09 20:16:21,106 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"I\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0
2025-05-09 20:17:22,537 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"I\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa\",\n    \"ilosc\": 1.0,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n   
2025-05-09 20:18:05,098 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko i produkty mleczne\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"c\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i owoce\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": f
2025-05-09 20:22:23,674 INFO: [LLM] Surowa odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Mleko UHT 1,5 1I c\",\n    \"nazwa_znormalizowana\": \"Mleko UHT 1.5l\",\n    \"kategoria\": \"Mleko\",\n    \"ilosc\": 1.0,\n    \"jednostka\": \"l\",\n    \"cena_jednostkowa\": 3.29,\n    \"cena_laczna\": 3.29,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"c\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"PomkKroNaszSpiż240g c\",\n    \"nazwa_znormalizowana\": \"Pomidory krojone w sosie własnym 240g\",\n    \"kategoria\": \"Warzywa i przetwory\",\n    \"ilosc\": 1.0,\n    \"jednostka\": null,\n    \"cena_jednostkowa\": 2.99,\n    \"cena_laczna\": 2.99,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"13.01.2025\",\n    \"sklep\": \"Biedronka\",\n    \"zamrozony\": false,\n    \"ra
2025-05-09 20:55:10,260 INFO: [LLM] Pełna odpowiedź Gemini: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Baton Protein Nuts 2 * 1,79\",\n    \"nazwa_znormalizowana\": \"Baton Protein Nuts\",\n    \"kategoria\": \"Przekąski\",\n    \"ilosc\": 2,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.79,\n    \"cena_laczna\": 3.58,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"B\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Tortilla Chipsy 1 1 * 3,89\",\n    \"nazwa_znormalizowana\": \"Tortilla Chipsy\",\n    \"kategoria\": \"Przekąski\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 3.89,\n    \"cena_laczna\": 3.89,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"HALLS cukierki mięt.\",\n    \"nazwa_znormalizowana\": \"HALLS cukierki miętowe\",\n    \"kategoria\": \"Słodycze\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.49,\n    \"cena_laczna\": 2.49,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"A\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Heineken 8% piwo\",\n    \"nazwa_znormalizowana\": \"Heineken 8% piwo\",\n    \"kategoria\": \"Alkohol\",\n    \"ilosc\": 16,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 4.59,\n    \"cena_laczna\": 73.44,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"A\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  }\n]\n```"
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "avgLogprobs": -0.0097927526774140173
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 886,
    "candidatesTokenCount": 788,
    "totalTokenCount": 1674,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 886
      }
    ],
    "candidatesTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 788
      }
    ]
  },
  "modelVersion": "gemini-2.0-flash-lite"
}

2025-05-09 20:55:10,260 INFO: [LLM] Błąd parsowania JSON: name 'json' is not defined | Odpowiedź: [
  {
    "produkt": "Baton Protein Nuts 2 * 1,79",
    "nazwa_znormalizowana": "Baton Protein Nuts",
    "kategoria": "Przekąski",
    "ilosc": 2,
    "jednostka": "szt.",
    "cena_jednostkowa": 1.79,
    "cena_laczna": 3.58,
    "data_waznosci": null,
    "data_zakupu": "2024-11-16",
    "sklep": "Lidl",
    "zamrozony": false,
    "rabat": 0.0,
    "kategoria_podatkowa": "B",
    "status": "dostępny",
    "pewnosc": 95
  },
  {
    "produkt": "Tortilla Chipsy 1 1 * 3,89",
    "nazwa_znormalizowana": "Tortilla Chipsy",
    "kategoria": "Przekąski",
    "ilosc": 1,
    "jednostka": "szt.",
    "cena_jednostkowa": 3.89,
    "cena_laczna": 3.89,
    "data_waznosci": null,
    "data_zakupu": "2024-11-16",
    "sklep": "Lidl",
    "zamrozony": false,
    "rabat": 0.0,
    "kategoria_podatkowa": "C",
    "status": "dostępny",
    "pewnosc": 95
  },
  {
    "produkt": "HALLS cukierki mięt.",
    "nazwa_znormalizowana": "HALLS cukierki miętowe",
    "kategoria": "Słodycze",
    "ilosc": 1,
    "jednostka": "szt.",
    "cena_jednostkowa": 2.49,
    "cena_laczna": 2.49,
    "data_waznosci": null,
    "data_zakupu": "2024-11-16",
    "sklep": "Lidl",
    "zamrozony": false,
    "rabat": 0.0,
    "kategoria_podatkowa": "A",
    "status": "dostępny",
    "pewnosc": 95
  },
  {
    "produkt": "Heineken 8% piwo",
    "nazwa_znormalizowana": "Heineken 8% piwo",
    "kategoria": "Alkohol",
    "ilosc": 16,
    "jednostka": "szt.",
    "cena_jednostkowa": 4.59,
    "cena_laczna": 73.44,
    "data_waznosci": null,
    "data_zakupu": "2024-11-16",
    "sklep": "Lidl",
    "zamrozony": false,
    "rabat": 0.0,
    "kategoria_podatkowa": "A",
    "status": "dostępny",
    "pewnosc": 95
  }
]
2025-05-09 20:55:10,260 INFO: [LLM] Błąd przetwarzania odpowiedzi Gemini: Błąd parsowania odpowiedzi Gemini: name 'json' is not defined | Odpowiedź: {
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "```json\n[\n  {\n    \"produkt\": \"Baton Protein Nuts 2 * 1,79\",\n    \"nazwa_znormalizowana\": \"Baton Protein Nuts\",\n    \"kategoria\": \"Przekąski\",\n    \"ilosc\": 2,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 1.79,\n    \"cena_laczna\": 3.58,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"B\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Tortilla Chipsy 1 1 * 3,89\",\n    \"nazwa_znormalizowana\": \"Tortilla Chipsy\",\n    \"kategoria\": \"Przekąski\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 3.89,\n    \"cena_laczna\": 3.89,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"C\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"HALLS cukierki mięt.\",\n    \"nazwa_znormalizowana\": \"HALLS cukierki miętowe\",\n    \"kategoria\": \"Słodycze\",\n    \"ilosc\": 1,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 2.49,\n    \"cena_laczna\": 2.49,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"A\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  },\n  {\n    \"produkt\": \"Heineken 8% piwo\",\n    \"nazwa_znormalizowana\": \"Heineken 8% piwo\",\n    \"kategoria\": \"Alkohol\",\n    \"ilosc\": 16,\n    \"jednostka\": \"szt.\",\n    \"cena_jednostkowa\": 4.59,\n    \"cena_laczna\": 73.44,\n    \"data_waznosci\": null,\n    \"data_zakupu\": \"2024-11-16\",\n    \"sklep\": \"Lidl\",\n    \"zamrozony\": false,\n    \"rabat\": 0.0,\n    \"kategoria_podatkowa\": \"A\",\n    \"status\": \"dostępny\",\n    \"pewnosc\": 95\n  }\n]\n```"
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "avgLogprobs": -0.0097927526774140173
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 886,
    "candidatesTokenCount": 788,
    "totalTokenCount": 1674,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 886
      }
    ],
    "candidatesTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 788
      }
    ]
  },
  "modelVersion": "gemini-2.0-flash-lite"
}

2025-05-11 21:20:04,373 INFO: Plik wgrany: receipt.pdf
2025-05-11 21:20:04,373 INFO: OCR OK dla pliku receipt.pdf. Tekst: Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327
...
2025-05-11 21:20:30,439 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327
...
2025-05-11 21:20:30,770 INFO: [LLM] Pełna odpowiedź Gemini: {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

2025-05-11 21:20:30,770 INFO: [LLM] Błąd Gemini: 400 {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

2025-05-11 21:20:30,770 INFO: Błąd LLM: Błąd Gemini: 400 {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

2025-05-11 21:30:28,270 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327
...
2025-05-11 21:30:28,271 INFO: Błąd LLM: openai nie jest zainstalowane. Dodaj 'openai' do requirements.txt i zainstaluj.
2025-05-11 21:32:20,843 INFO: Prompt do LLM (sklep: Biedronka): Sklep 3218 TARGOWA 4
Jeronimo Martins Polska S. A.
ul. Żniwna 5, 62-025 Kostrzyn

NIP 779-10-11-327
...
2025-05-11 21:34:57,592 INFO: HTTP Request: POST http://192.168.0.167:1234/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-11 21:34:57,594 INFO: Błąd LLM: Expanders may not be nested inside other expanders.
